**По тарифу "Классика"**

1. E2E_classic_to_classic_test

Звонок происходит между двумя абонентами оператора "Ромашка". Оба абонента имеют тарифный план (ТП) "Классика". Звонок происходит с 13:55:37 до 13:59:54 того же дня, т.е. он занимает 4 минуты 17 секунд (HRS должна округлить время до 5 минут).
|  | Стоимость звонка |
|---|---|
| Абонент 1 | 7.5 у.е. |
| Абонент 2 | 0 у.е. |

Абонент 1 в таблице - абонент оператора "Ромашки", который совершает вызов, а Абонент 2 - тот, кто принимает входящий звонок.

В CDR-файле первые две записи - информация об этом звонке (зеркальные записи для двух абонентов оператора "Ромашка").
Остальные 8 записей в CDR - входящие звонки абонентам с ТП "Классика" от абонентов других операторов (баланс этих абонентов не изменяется).

2. E2E_classic_to_other_operator_test

Абонент оператора "Ромашка" звонит абоненту другого оператора. Абонент "Ромашки" имеет тарифный план "Классика". Звонок происходит с 14:32:18 до 14:32:59 того же дня, т.е. он занимает 41 секунду (HRS должна округлить время до 1 минуты).
|  | Стоимость звонка |
|---|---|
| Абонент 1 | 2.5 у.е. |
| Абонент 2 | 0 у.е. |

Абонент 1 в таблице - абонент оператора "Ромашки", который совершает вызов, а Абонент 2 - тот, кто принимает входящий звонок; абонент другого оператора.

В CDR-файле первая запись - информация об этом звонке (зеркальная запись отсутствует).
Остальные 9 записей в CDR - входящие звонки абонентам с ТП "Классика" от абонентов других операторов (баланс этих абонентов не изменяется).

**По тарифу "Помесячный"**

1. E2E_month_to_month_test

Звонок происходит между двумя абонентами оператора "Ромашка". Оба абонента имеют тарифный план (ТП) "Помесячный". Звонок происходит с 13:55:00 до 13:59:00 того же дня, т.е. он занимает 4 минуты (HRS должна посчитать длительность звонка также 4 минуты). Тарификационный период обоих абонентов на момент звонка не истёк.

Плата за превышение лимита по минутам списывается по ТП "Классика": 4 минуты * 1.5 у.е./минута = 6 у.е.
|  | Количество потраченных минут до звонка| Количество потраченных минут после звонка | Количество начисленных минут | Стоимость звонка |
|---|---|---|---|---|
| Абонент 1 | 50/50 | 50/50 | 0 | 6 у.е. |
| Абонент 2 | 30/50 | 34/50 | 4 | 0 у.е. |

Абонент 1 в таблице - абонент оператора "Ромашки", который совершает вызов, а Абонент 2 - тот, кто принимает входящий звонок.

В CDR-файле последние две записи - информация об этом звонке (зеркальные записи для двух абонентов оператора "Ромашка").
Остальные 8 записей в CDR - входящие звонки абонентам с ТП "Классика" от абонентов других операторов (баланс этих абонентов не изменяется).

2. E2E_month_to_other_exceeding_limit_test

Абонент оператора "Ромашка" звонит абоненту другого оператора. Абонент "Ромашки" имеет тарифный план "Помесячный". Звонок происходит с 13:55:00 до 14:54:53 того же дня, т.е. он занимает 59 минут и 53 секунды (HRS должна округлить время до 60 минут). Тарификационный период абонента 1 на момент звонка истёк. Поэтому с его счёта должна списаться абонентская плата за тариф (100 у.е.) и плата за превышение лимита минут по тарифу (50), т.е. (60 - 50) * 2.5 = 10 * 2.5 = 25. Всего должно быть списано 125 у.е. Применяется тарификация 2.5 у.е / минута, а не 1.5 у.е / минута, т.к. происходит звонок на номер другого оператора.

Согласно ТП "Помесячный" абонент имеет 50 минут по тарифу. Данный звонок превышает данный лимит. Поэтому количество использованных минут абонента должно быть равно 50.
|  | Абонент оператора "Ромашка" с ТП "Помесячный" |
|---|---|
| Сумма к списанию | 125 у.е. |
| Итоговое количество минут | 50 |

Абонент 1 в таблице - абонент оператора "Ромашки", который совершает вызов, а Абонент 2 - тот, кто принимает входящий звонок; абонент другого оператора.

В CDR-файле последняя запись - информация об этом звонке (зеркальная запись отсутствует).
Остальные 9 записей в CDR - входящие звонки абонентам с ТП "Классика" от абонентов других операторов (баланс этих абонентов не изменяется).
